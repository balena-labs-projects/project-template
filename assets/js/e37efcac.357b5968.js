"use strict";(self.webpackChunkBalena_Labs=self.webpackChunkBalena_Labs||[]).push([[805],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>m});var o=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var u=o.createContext({}),p=function(e){var t=o.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=p(e.components);return o.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),c=p(a),m=n,h=c["".concat(u,".").concat(m)]||c[m]||d[m]||r;return a?o.createElement(h,i(i({ref:t},s),{},{components:a})):o.createElement(h,i({ref:t},s))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=c;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var p=2;p<r;p++)i[p]=a[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,a)}c.displayName="MDXCreateElement"},8140:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var o=a(7462),n=(a(7294),a(3905));const r={},i="Usage",l={unversionedId:"usage",id:"usage",title:"Usage",description:"After your device finishes downloading the application, you should be ready to go!",source:"@site/docs/02-usage.md",sourceDirName:".",slug:"/usage",permalink:"/project-template/usage",draft:!1,editUrl:"https://github.com/balena-labs-projects/project-template/edit/main/docs/02-usage.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Getting started",permalink:"/project-template/"},next:{title:"Customization",permalink:"/project-template/customization"}},u={},p=[{value:"Modes of operation",id:"modes-of-operation",level:2},{value:"Multi-room mode",id:"multi-room-mode",level:3},{value:"Multi-room client mode",id:"multi-room-client-mode",level:3},{value:"Standalone",id:"standalone",level:3},{value:"Plugin system",id:"plugin-system",level:2},{value:"Audio interfaces",id:"audio-interfaces",level:2}],s={toc:p};function d(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,o.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"usage"},"Usage"),(0,n.kt)("p",null,"After your device finishes downloading the application, you should be ready to go!"),(0,n.kt)("p",null,"Before starting, make sure to connect the audio output of your device to your Hi-Fi or speaker system. Remember that we support multiple ",(0,n.kt)("a",{parentName:"p",href:"/project-template/audio-interfaces"},"audio interfaces"),". This is helpful if you're interested in improving the audio quality of your setup-- be sure to check it out."),(0,n.kt)("p",null,"To connect to your balenaSound device:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"If using Bluetooth: search for your device on your phone or laptop and pair."),(0,n.kt)("li",{parentName:"ul"},"If using Airplay: select the balenaSound device from your audio output options."),(0,n.kt)("li",{parentName:"ul"},"If using Spotify Connect: open Spotify and choose the balenaSound device as an alternate output."),(0,n.kt)("li",{parentName:"ul"},"If using UPnP: select the balenaSound device from your UPnP app like ",(0,n.kt)("a",{parentName:"li",href:"https://play.google.com/store/apps/details?id=com.bubblesoft.android.bubbleupnp"},"BubbleUPnP")," (Android) or ",(0,n.kt)("a",{parentName:"li",href:"https://apps.apple.com/app/jup-p-upnp-player-und-fernbedienung/id1069722311"},"JuP&P")," (IOS).")),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"balenaSound <plugin> xxxx")," name is used by default, where ",(0,n.kt)("inlineCode",{parentName:"p"},"xxxx")," will be the first 4 characters of the device UUID in the balenaCloud dashboard."),(0,n.kt)("p",null,"Let the music play!"),(0,n.kt)("h2",{id:"modes-of-operation"},"Modes of operation"),(0,n.kt)("p",null,"balenaSound supports multiple modes of operation described below:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Multi-room mode"),(0,n.kt)("li",{parentName:"ul"},"Multi-room client mode"),(0,n.kt)("li",{parentName:"ul"},"Standalone")),(0,n.kt)("p",null,"By default, most devices will start in multi-room mode. You can change that by setting an environment variable, check out the ",(0,n.kt)("a",{parentName:"p",href:"/project-template/customization#general"},"customization")," section to learn how."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Note:")," Multi-room mode is the default mode for most (but not all!) device types. You can read more about default modes ",(0,n.kt)("a",{parentName:"p",href:"/project-template/device-support#recommended"},"here"),"."),(0,n.kt)("h3",{id:"multi-room-mode"},"Multi-room mode"),(0,n.kt)("p",null,'Multi-room mode allows you to play perfectly synchronized audio on multiple devices, it turns balenaSound into a "Sonos-like" multi-room solution. It doesn\'t matter whether you have 2 or 100 devices, you only need them to be part of the same local network.'),(0,n.kt)("p",null,"When in multi-room mode devices can take one of two roles:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"master"),": the device acting as the audio source"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"client"),": any number of devices playing back the audio being sent over by the ",(0,n.kt)("inlineCode",{parentName:"li"},"master"))),(0,n.kt)("p",null,"Designing a ",(0,n.kt)("inlineCode",{parentName:"p"},"master")," device is easy and requires no configuration. Whenever you start streaming to any device in multi-room mode, it will autoconfigure itself to be the ",(0,n.kt)("inlineCode",{parentName:"p"},"master")," device and will broadcast a message to all other devices within your local network to get them in sync. Note that it can take a few seconds for the system to autoconfigure the first time you stream.\nYou can always change the ",(0,n.kt)("inlineCode",{parentName:"p"},"master")," by streaming to a different device."),(0,n.kt)("p",null,"It's a good idea to use the most powerful device on your fleet as the designated ",(0,n.kt)("inlineCode",{parentName:"p"},"master")," as it does take up more resources. For example, if your setup consists of a Raspberry Pi 4 and a couple of Raspberry Pi 2, then using the Pi 4 as the ",(0,n.kt)("inlineCode",{parentName:"p"},"master")," is the better option."),(0,n.kt)("h3",{id:"multi-room-client-mode"},"Multi-room client mode"),(0,n.kt)("p",null,"When a device is in multi-room client mode it can only be used as a multi-room ",(0,n.kt)("inlineCode",{parentName:"p"},"client"),". The only audio the device will play is audio coming from a ",(0,n.kt)("inlineCode",{parentName:"p"},"master")," device, so you'll need at least another device in your application."),(0,n.kt)("p",null,"This mode is great for performance constrained devices as plugin services (Spotify, AirPlay, etc) won't be running and consuming CPU cycles. It's also a great choice if you usually stream to the same ",(0,n.kt)("inlineCode",{parentName:"p"},"master")," device and don't want to have every device show up when pairing bluetooth for example."),(0,n.kt)("h3",{id:"standalone"},"Standalone"),(0,n.kt)("p",null,"Standalone is the original balenaSound mode (pre version 2.0). In this mode your device won't run any of the multi-room services, it will run independently and won't be aware of other devices in your network/application."),(0,n.kt)("p",null,"Use this mode when you have only one device in your fleet, or if you want to have multiple independent devices."),(0,n.kt)("h2",{id:"plugin-system"},"Plugin system"),(0,n.kt)("p",null,"balenaSound has been re-designed to easily allow integration with audio streaming sources. These are the sources we currently support and the projects that make it possible:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Plugin"),(0,n.kt)("th",{parentName:"tr",align:null},"Library/Project"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Spotify"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://github.com/dtcooper/raspotify/"},"raspotify")," Spotify Connect only works with Spotify Premium accounts. Zeroconf authentication via your phone/device Spotify client is supported as well as providing user and password, see ",(0,n.kt)("a",{parentName:"td",href:"/project-template/customization#plugins"},"customization")," section for details.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"AirPlay"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://github.com/mikebrady/shairport-sync/"},"shairport-sync"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"UPnP"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://github.com/hzeller/gmrender-resurrect"},"gmrenderer-resurrect"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Bluetooth"),(0,n.kt)("td",{parentName:"tr",align:null},"balena ",(0,n.kt)("a",{parentName:"td",href:"https://github.com/balenablocks/bluetooth/"},"bluetooth")," and ",(0,n.kt)("a",{parentName:"td",href:"https://github.com/balenablocks/audio"},"audio")," blocks")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Soundcard input"),(0,n.kt)("td",{parentName:"tr",align:null},"Experimental support through the balena ",(0,n.kt)("a",{parentName:"td",href:"https://github.com/balenablocks/audio"},"audio")," block. Check the ",(0,n.kt)("a",{parentName:"td",href:"/project-template/customization#plugins"},"customization")," section to learn how to enable it.")))),(0,n.kt)("p",null,"If your desired audio source is not supported feel free to ",(0,n.kt)("a",{parentName:"p",href:"/project-template/device-support#contact-us"},"reach out")," and leave us a comment. We've also considerably simplified the process of adding new plugins, so ",(0,n.kt)("a",{parentName:"p",href:"/project-template/contributing"},"PR's are welcome")," too (be be sure to check out our balenaSound ",(0,n.kt)("a",{parentName:"p",href:"/project-template/architecture"},"architecture")," guide)!"),(0,n.kt)("h2",{id:"audio-interfaces"},"Audio interfaces"),(0,n.kt)("p",null,"balenaSound supports all audio interfaces present on our ",(0,n.kt)("a",{parentName:"p",href:"/project-template/device-support"},"supported devices")," be it 3.5mm audio jack, HDMI, I2C DAC's or USB soundcards. We rely on ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/balenablocks/audio"},"balenaLabs' audio block")," to do the configuration required for this to work."),(0,n.kt)("p",null,"Some audio interfaces require special configuration, you can read more about this in the ",(0,n.kt)("a",{parentName:"p",href:"/project-template/audio-interfaces"},"audio interfaces")," configuration section."))}d.isMDXComponent=!0}}]);